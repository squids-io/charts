global:
  registry: docker.io
  repository: squids

objectStorage:
  type: S3
  endpoint: "input these please"
  bucket: "input these please"
  accessKeyId: "input these please"
  accessKeySecret: "input these please"

image:
  pullPolicy: IfNotPresent
  prometheusTag: v2.19.2
  thanosTag: v0.16.0-rc.1
  alertmanagerTag: v0.21.0

serverEnabled: true

alertmanagerSts:
  replicaCount: 1

  smtp_from: xxx
  smtp_auth_username: xxx
  smtp_auth_password: xxx
  smtp_receiver: xxx

  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: squids/cluster
                operator: In
                values:
                  - squids-monitor
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchExpressions:
              - key: app.kubernetes.io/name
                operator: In
                values:
                  - alertmanager
          topologyKey: kubernetes.io/hostname

#  nodeSelector:
#    node-role.kubernetes.io/master: ""
#
#  tolerations:
#    - effect: NoSchedule
#      key: node-role.kubernetes.io/master
#      operator: Exists

prometheusSts:
  replicaCount: 1

  pvcSize: 200Gi

  kubePKIPath: /etc/kubernetes/pki

  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: squids/cluster
                operator: In
                values:
                  - squids-monitor
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchExpressions:
              - key: app.kubernetes.io/name
                operator: In
                values:
                  - prometheus
          topologyKey: kubernetes.io/hostname

#  nodeSelector:
#    node-role.kubernetes.io/master: ""
#
#  tolerations:
#  - effect: NoSchedule
#    key: node-role.kubernetes.io/master
#    operator: Exists

  prometheus:
    resources: {}
    storage:
      retentionTime: 10d
      minBlockDuration: 2h
      maxBlockDuration: 2h

  thanos:
    resources: {}

thanosQuery:
  httpPort: 9090
  grpcPort: 10901
  replicaCount: 1

#  nodeSelector:
#    node-role.kubernetes.io/master: ""
#
#  tolerations:
#  - effect: NoSchedule
#    key: node-role.kubernetes.io/master
#    operator: Exists

  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: squids/cluster
                operator: In
                values:
                  - squids-monitor
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - podAffinityTerm:
            labelSelector:
              matchExpressions:
                - key: app.kubernetes.io/name
                  operator: In
                  values:
                    - thanos-query
            topologyKey: kubernetes.io/hostname
          weight: 100

  resources: {}

thanosStore:
  replicaCount: 1
  pvcSize: 10Gi

  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: squids/cluster
                operator: In
                values:
                  - squids-monitor
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchLabels:
              app.kubernetes.io/name: thanos-store
          topologyKey: kubernetes.io/hostname

#  nodeSelector:
#    node-role.kubernetes.io/master: ""
#
#  tolerations:
#  - effect: NoSchedule
#    key: node-role.kubernetes.io/master
#    operator: Exists

  resources: {}

thanosRule:
  replicaCount: 1
  pvcSize: 100Gi

  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: squids/cluster
                operator: In
                values:
                  - squids-monitor
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchLabels:
              app.kubernetes.io/name: thanos-rule
          topologyKey: kubernetes.io/hostname

#  nodeSelector:
#    node-role.kubernetes.io/master: ""
#
#  tolerations:
#    - effect: NoSchedule
#      key: node-role.kubernetes.io/master
#      operator: Exists

  resources: {}

thanosCompact:
  retention:
    resolutionRaw: 90d
    resolution5m: 180d
    resolution1h: 360d
  pvcSize: 100Gi

  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: squids/cluster
                operator: In
                values:
                  - squids-monitor
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchExpressions:
              - key: app.kubernetes.io/name
                operator: In
                values:
                  - thanos-compact
          topologyKey: kubernetes.io/hostname

#  nodeSelector:
#    node-role.kubernetes.io/master: ""
#
#  tolerations:
#  - effect: NoSchedule
#    key: node-role.kubernetes.io/master
#    operator: Exists

  resources: {}



